# Gemini Project Helper

This document provides instructions and context for the Gemini agent to effectively assist with development in this repository.

## Project Overview

- **Project Name:** Elegoo Printer Home Assistant Integration
- **Type:** Home Assistant Custom Component
- **Language:** Python
- **Primary Code Location:** `custom_components/elegoo_printer/`

## Development Environment

This project uses `uv` for Python environment and dependency management. The virtual environment is expected to be located at `.venv/`.

- **Setup:** To set up the development environment and install all dependencies (including dev dependencies), run:
  ```bash
  make setup
  ```

## Key Commands

The `Makefile` contains all the necessary commands for common development tasks.

- **Linting:** To check the code for style and quality issues, run:
  ```bash
  make lint
  ```

- **Formatting:** To automatically format the code, run:
  ```bash
  make format
  ```

- **Fixing:** To automatically fix linting issues, run:
  ```bash
  make fix
  ```

- **Testing:** To run the automated test suite, run:
  ```bash
  make test
  ```

- **Running the development server:** To start the Home Assistant instance with the custom component for development, run:
  ```bash
  make start
  ```

- **Running the debug server:** To start the Home Assistant instance in debug mode, run:
  ```bash
  make debug
  ```

## Committing and Contributions

- Before committing any changes, please ensure that the code passes both the linter and the test suite.
- Run `make fix` and `make test` to validate your changes.
- Follow the existing code style and conventions.
- **Always create a feature branch for new work. Do not commit directly to `main`**

## Logging

The Home Assistant logs are located at `config/home-assistant.log`.

## Repository Structure

Here'''s a breakdown of the key files and directories in this repository and their general purpose:


   * Project Root (`/`):
       * .devcontainer.json: Configuration for development containers (e.g., VS Code Dev Containers).
       * .gitattributes, .gitignore: Git configuration for file handling and ignored files.
       * .python-version: Specifies the Python version for tools like pyenv.
       * CONTRIBUTING.md: Guidelines for project contributions.
       * debug.py: A script likely used for debugging the Home Assistant integration.
       * GEMINI.md: This document, providing context and instructions for the Gemini agent.
       * hacs.json: Configuration file for Home Assistant Community Store (HACS) integration.
       * LICENSE: The project'''s open-source license.
       * Makefile: Contains commands for common development tasks (setup, linting, formatting, testing, running the dev server).
       * pyproject.toml: Defines project metadata, dependencies, and tool configurations (e.g., uv, ruff, pytest).
       * README.md: The main project documentation and overview.
       * uv.lock: A lock file generated by uv to ensure reproducible Python environments.


   * `.github/`: Contains GitHub-specific configurations.
       * ISSUE_TEMPLATE/: Templates for creating new issues on GitHub.
       * workflows/: GitHub Actions workflows for continuous integration (CI) tasks like linting, testing, and releases.

   * `.venv/`: The Python virtual environment where project dependencies are installed.


   * `blueprints/`: Home Assistant automation blueprints.
       * automation/elegoo_printer/elegoo_printer_progress.yaml: A specific Home Assistant automation blueprint related to printer progress.


   * `config/`: A Home Assistant configuration directory used for local development and testing.
       * configuration.yaml: The main Home Assistant configuration file for the development instance.


   * `custom_components/elegoo_printer/`: This is the core directory for the Home Assistant custom component.
       * __init__.py: Initializes the Python package and the Home Assistant integration itself.
       * api.py: Likely handles the high-level communication logic with the Elegoo printer.
       * button.py, camera.py, fan.py, image.py, light.py, number.py, select.py, sensor.py: These files define the various types of Home Assistant entities (buttons, cameras, fans, lights,
         sensors, etc.) that the integration exposes for the Elegoo printer.
       * config_flow.py: Manages the setup and configuration process of the integration within the Home Assistant UI.
       * const.py: Stores constant values used throughout the integration.
       * coordinator.py: Manages data updates and state synchronization between the printer and Home Assistant.
       * manifest.json: A required Home Assistant file providing metadata about the custom component (version, dependencies, etc.).
       * elegoo_mqtt/: Contains code for communicating with Elegoo printers via MQTT.
       * elegoo_sdcp/: Contains code for communicating with Elegoo printers using their proprietary SDCP protocol.
           * client.py: The client implementation for the SDCP protocol.
           * models/: Python data models representing the data structures used in the SDCP protocol (e.g., printer status, print history).
       * translations/en.json: Contains English translations for the integration'''s user interface.


   * `scripts/`: Contains various utility scripts for development.


   * `tests/`: Contains unit and integration tests for the entire project.